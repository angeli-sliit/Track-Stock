<%@ include file="headeradmin.jsp" %>

<title>Track-Stock - AdminDashboard</title>

<div class="page">
    <div class="container-fluid">

        <!-- Welcome Alert -->
        <div class="row">
            <div class="col-md-6">
                <div class="alert alert-success" style="opacity:0">
                    <a href="#" class="close" data-dismiss="alert">×</a>Welcome to Inventory Management System
                </div>   
            </div>
        </div>

        <!-- Dashboard Panels -->
        <div class="row">
            <!-- Users panel -->
            <a href="users.php" style="color:black;">
                <div class="col-md-3">
                    <div class="panel panel-box clearfix h-10px">
                        <div class="panel-icon pull-left bg-secondary1">
                            <i class="glyphicon glyphicon-user"></i>
                        </div>
                        <div class="panel-value pull-right">
                            <h2 class="margin-top"><%= request.getAttribute("userCount") %></h2>
                            <p class="text-muted">Users</p>
                        </div>
                    </div>
                </div>
            </a>

            <!-- Categories panel -->
            <a href="categorie.php" style="color:black;">
                <div class="col-md-3">
                    <div class="panel panel-box clearfix">
                        <div class="panel-icon pull-left bg-red">
                            <i class="glyphicon glyphicon-th-large"></i>
                        </div>
                        <div class="panel-value pull-right">
                            <h2 class="margin-top"> <%= request.getAttribute("categoryCount") %> </h2>
                            <p class="text-muted">Categories</p>
                        </div>
                    </div>
                </div>
            </a>

            <!-- Products panel -->
            <a href="product.php" style="color:black;">
                <div class="col-md-3">
                    <div class="panel panel-box clearfix">
                        <div class="panel-icon pull-left bg-blue2">
                            <i class="glyphicon glyphicon-shopping-cart"></i>
                        </div>
                        <div class="panel-value pull-right">
                            <h2 class="margin-top"> <%= request.getAttribute("productCount") %> </h2>
                            <p class="text-muted">Products</p>
                        </div>
                    </div>
                </div>
            </a>

            <!-- Sales panel -->
            <a href="sales.php" style="color:black;">
                <div class="col-md-3">
                    <div class="panel panel-box clearfix">
                        <div class="panel-icon pull-left bg-green">
                            <i class="glyphicon glyphicon-usd"></i>
                        </div>
                        <div class="panel-value pull-right">
                            <h2 class="margin-top"> Rs.<%= request.getAttribute("salesTotal") %></h2>
                            <p class="text-muted">Sales</p>
                        </div>
                    </div>
                </div>
            </a>
        </div>

        <!-- Highest Selling Products Panel -->
        <div class="row">
            <div class="col-md-4">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <strong>
                            <span class="glyphicon glyphicon-th"></span>
                            <span>Highest Selling Products</span>
                        </strong>
                    </div>
                    <div class="panel-body">
                        <table class="table table-striped table-bordered table-condensed">
                            <thead>
                                <tr>
                                    <th>Product Name</th>
                                    <th>Added Date</th>
                                    <th>Total Price</th>
                                    <th>No of Pcs</th>
                                </tr>
                            </thead>
                            <tbody>
                                <c:forEach var="product" items="${requestScope.topProducts}">
                                    <tr>
                                        <td>${product.prodName}</td>
                                        <td>${product.addedDate}</td>
                                        <td>${product.totalPrice}</td>
                                        <td>${product.count}</td>
                                    </tr>
                                </c:forEach>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Latest Sales Panel -->
            <div class="col-md-4">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <strong>
                            <span class="glyphicon glyphicon-th"></span>
                            <span>Latest Sales</span>
                        </strong>
                    </div>
                    <div class="panel-body">
                        <table class="table table-striped table-bordered table-condensed">
                            <thead>
                                <tr>
                                    <th>Product Name</th>
                                    <th>Added Date</th>
                                    <th>Total Price</th>
                                </tr>
                            </thead>
                            <tbody>
                                <c:forEach var="sale" items="${requestScope.latestSales}">
                                    <tr>
                                        <td>${sale.prodName}</td>
                                        <td>${sale.addedDate}</td>
                                        <td>${sale.totalPrice}</td>
                                    </tr>
                                </c:forEach>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Recently Added Products Panel -->
            <div class="col-md-4">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <strong>
                            <span class="glyphicon glyphicon-th"></span>
                            <span>Recently Added Products</span>
                        </strong>
                    </div>
                    <div class="panel-body">
                        <table class="table table-striped table-bordered table-condensed">
                            <thead>
                                <tr>
                                    <th>Image</th>
                                    <th>Product Name</th>
                                    <th>Price</th>
                                    <th>Category</th>
                                </tr>
                            </thead>
                            <tbody>
                                <c:forEach var="product" items="${requestScope.recentProducts}">
                                    <tr>
                                        <td><img src="${product.image}" alt="Product Image" style="width: 50px;"></td>
                                        <td>${product.prodName}</td>
                                        <td>${product.price}</td>
                                        <td>${product.category}</td>
                                    </tr>
                                </c:forEach>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
window.onload = function() {
   window.location.href = "../../DashboardDataFetch"
};

</script>
