<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ include file="../Dashboard/headeradmin.jsp" %>
<%@ page import="java.sql.Connection, java.sql.PreparedStatement, java.sql.ResultSet, java.sql.SQLException" %>
<%@ page import="auth.DbConn" %>




<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Track-Stock - Manage Products</title>
</head>
<body>
<div class="page">
  <div class="container-fluid">
  <div class="row">
     <div class="col-md-12">
            </div>
    <div class="col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading clearfix">
         <div class="pull-right">
           <a href="add_product.php" class="btn btn-primary">Add New</a>
         </div>
        </div>
        <div class="panel-body">
          <table class="table table-bordered">
            <thead>
              <tr>
                <th class="text-center" style="width: 50px;">Product ID</th>
                <th> Photo</th>
                <th> Product Title </th>
                <th class="text-center" style="width: 10%;"> Categories </th>
                <th class="text-center" style="width: 10%;"> In-Stock </th>
                <th class="text-center" style="width: 10%;"> Buying Price </th>
                <th class="text-center" style="width: 10%;"> Product Added </th>
                <th class="text-center" style="width: 100px;"> Actions </th>
              </tr>
            </thead>
            <tbody>
             <% 
                                try (Connection conn = DbConn.getConnection();
                                     PreparedStatement pstmt = conn.prepareStatement(
                                         "SELECT * FROM `products`  As p INNER JOIN product_category AS pc ON p.ProductCategory = pc.product_cat_id");
                                     ResultSet rs = pstmt.executeQuery()) {

                                    while (rs.next()) {
                                       String prodId = rs.getString("prodId");
                                       String prodName = rs.getString("ProdName");
                                       String Quantity = rs.getString("Quantity");
                                       String TotalDate = rs.getString("TotalDate");
                                       String Category =  rs.getString("product_category");
                                       String Price = rs.getString("Price");
                                %>
                               <tr>
                <td class="text-center"><%=prodId %></td>
                <td>
                    <img class="img-avatar img-circle" src="uploads/products/no_image.png" alt="">
               </td>
                <td> <%=prodName %></td>
                <td class="text-center"> <%=Category %></td>
                <td class="text-center"> <%=Quantity %></td>
                <td class="text-center"> <%=Price %></td>
                <td class="text-center"> <%=TotalDate %></td>
                <td class="text-center">
                  <div class="btn-group">
                    <a href="edit_product.php?id=1" class="btn btn-info btn-xs" title="" data-toggle="tooltip" data-original-title="Edit">
                      <span class="glyphicon glyphicon-edit"></span>
                    </a>
                    <a href="delete_product.php?id=1" class="btn btn-danger btn-xs" title="" data-toggle="tooltip" data-original-title="Delete">
                      <span class="glyphicon glyphicon-trash"></span>
                    </a>
                  </div>
                </td>
              </tr>
                                <% 
                                    }
                                } catch (SQLException | ClassNotFoundException e) {
                                    e.printStackTrace();
                                }
                                %>
            
               
                         </tbody>
          
        
      
    
  
       
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.min.js"></script>
  <script type="text/javascript" src="libs/js/functions.js"></script>
  


</table></div></div></div></div></div></div>
</body>
</html>